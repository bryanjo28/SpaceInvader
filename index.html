<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Space Invader</title>

	<style>
		body {
			margin: 0;
			display: flex;
			overflow: hidden;
		}

		/* Styling overlay */
		.overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.5);
			display: flex;
			justify-content: center;
			align-items: center;
			z-index: 999;
			opacity: 0;
			visibility: hidden;
			transition: opacity 0.3s, visibility 0s 0.3s;
		}

		.overlay.active {
			opacity: 1;
			visibility: visible;
			transition: opacity 0.3s, visibility 0s;
		}

		.overlay-content {
			position: relative;
			width: 80%;
			max-width: 600px;
			height: 300px;
			background-image: url('./game_over.png');
			background-size: cover;
			background-position: center;
			border-radius: 10px;
			display: flex;
			flex-direction: column;
			justify-content: flex-end;
			align-items: center;
			padding-bottom: 50px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
			color: white;
		}

		.overlay-content p {
			margin: 0;
			padding: 10px;
			border-radius: 10px;
			width: 100%;
			text-align: center;
		}

		.overlay button {
			padding: 10px 20px;
			font-size: 16px;
			background-color: blue;
			color: #ffffff;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			transition: background-color 0.3s;
			margin-top: 20px;
		}

		.overlay button:hover {
			background-color: darkblue;
		}

		#score-container {
			position: fixed;
			z-index: 10;
			color: white;
			right: 10px;
			top: 10px;
			margin: 0;
			font-family: sans-serif;
			font-size: 14px;
		}
		#meteor {
			position: fixed;
			top: 0;
			left: 0;
			width: 100px;
			height: auto;
			z-index: 1000;
			animation: fall 5s linear infinite;
		}

		@keyframes fall {
			0% {
				top: -100px;
				left: -100px;
			}
			100% {
				top: 100vh;
				left: 100vw;
			}
		}
	</style>
</head>

<body>
	<div class="overlay" id="gameOverOverlay">
		<div class="overlay-content">
			<br>
			<p>Score: <span id="gameOverScore">0</span></p>
			<button onclick="restartGame()">Restart</button>
		</div>
	</div>
	<!-- Meteor GIF -->
	<img id="meteor" src="./meteor.gif" alt="Meteor GIF">

	<p id="score-container"><span>Score:</span><span id="score">0</span></p>

	<canvas></canvas>
	<script src="./index.js"></script>
	<audio id="backgroundMusic" autoplay loop>
		<source src="/audio/backgroundMusic.wav" type="audio/mpeg">
		Your browser does not support the audio element.
	</audio>
	<script>
		const gameStart = new Audio("/audio/start.mp3");

		function restartGame() {
			// Restart logic here, for example:
			// Reload the page
			gameStart.play();
			location.reload();
		}
		const backgroundMusic = document.getElementById("backgroundMusic");
		backgroundMusic.volume = 0.5; // Volume dapat diatur antara 0 dan 1, di mana 1 adalah volume penuh
		document.addEventListener("DOMContentLoaded", function () {
			const backgroundMusic = document.getElementById("backgroundMusic");
			backgroundMusic.volume = 0.5;
		});

		function getRandomInt(min, max) {
			return Math.floor(Math.random() * (max - min + 1)) + min;
		}

		function animateMeteor() {
			const meteor = document.getElementById('meteor');
			const startX = getRandomInt(0, window.innerWidth - 100);
			const duration = getRandomInt(3, 10);

			meteor.style.left = `${startX}px`;
			meteor.style.top = '-100px';
			meteor.style.transition = `top ${duration}s linear`;

			setTimeout(() => {
				meteor.style.top = '100vh';
			}, 100); // Start the animation after setting the position

			meteor.addEventListener('transitionend', () => {
				const newStartX = getRandomInt(0, window.innerWidth - 100);
				const newDuration = getRandomInt(3, 10);

				meteor.style.left = `${newStartX}px`;
				meteor.style.top = '-100px';
				meteor.style.transition = `top ${newDuration}s linear`;

				setTimeout(() => {
					meteor.style.top = '100vh';
				}, 100); // Start the animation after setting the position
			});
		}

		function gameOver() {
			const gameOverOverlay = document.getElementById('gameOverOverlay');
			const meteor = document.getElementById('meteor');
			meteor.style.animation = "none"; // Stop the animation
			gameOverOverlay.classList.add('active');
			backgroundMusic.pause();
			gameOverSound.play();
		}

		animateMeteor();
	</script>

</body>

</html>
